{% extends "base.html" %}
{% load static %}

{% block title %}
    Ecocycle - Administración
{% endblock title %}

{% block content %}
    <div class="hero bg-base-200">
        <div class="hero-content text-center">
            <div class="max-w-md">
                <h1 class="text-4xl font-bold">Administrador "{{ request.session.user.nombre }}"</h1>
                <p class="py-6">
                    Portal de administración de "ecocycle"
                </p>
            </div>
        </div>
    </div>

    <div class="card bg-base-100 w-11/12 shadow-2xl mx-auto my-10">
        <div class="card-body">
            <div class="collapse collapse-arrow bg-indigo-100">
                <input type="checkbox" />
                <div class="collapse-title text-lg font-semibold">Buscar recolector</div>
                <div class="collapse-content">
                    <p>
                        Ingrese el email del recolector para ver sus estadísticas:
                    </p>
                    <form action="{% url 'administrador:index' %}" method="GET"> 
                        <label class="input border-primary flex items-center gap-2 my-4 transition duration-300">
                            <input type="text" autocomplete="off" name="email_recolector" value="{{ context.mvp_recolector.email }}" class="grow" placeholder="email@example.com" />
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="h-4 w-4 opacity-70">                        
                                <path fill-rule="evenodd" d="M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z" clip-rule="evenodd" />
                            </svg>
                        </label>
                        <div class="card-actions justify-end">
                            <a href="{% url 'administrador:index' %}?email_recolector">
                                <button type="button" class="btn btn-secondary">MVP</button>
                            </a>
                            <button type="submit" class="btn btn-primary">Ingresar</button>
                        </div>
                    </form>
                </div>
            </div>
            {% if messages %}
                {% for message in messages %}
                <div role="alert" class="alert alert-error mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span>{{ message }}</span>
                </div>
                {% endfor %}
            {% endif %}
            <div class="stats shadow-lg mt-4">
                <div class="stat">
                    <div class="stat-figure text-primary">
                        <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        class="inline-block h-8 w-8 stroke-current">
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                    </div>
                    <div class="stat-title">Cantidad recolectada</div>
                    <div class="stat-value text-primary">
                        {% if context.mvp_recolector.total_materiales %}
                            {{ context.mvp_recolector.total_materiales }} Kg
                        {% else %}
                            0 Kg
                        {% endif %}
                    </div>
                </div>
              
                <div class="stat">
                  <div class="stat-figure text-secondary">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      class="inline-block h-8 w-8 stroke-current">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                  </div>
                  <div class="stat-title">Cantidad de recolecciones</div>
                  <div class="stat-value text-secondary">{{ context.mvp_recolector.cantidad_recolecciones }}</div>
                </div>
              
                <div class="stat">
                  <div class="stat-figure text-secondary">
                    <div class="avatar online">
                      <div class="w-16 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                          </svg>
                      </div>                      
                    </div>
                  </div>
                  <div class="stat-value">{{ context.mvp_recolector.nombre }} {{ context.mvp_recolector.apellido }}</div>
                  <div class="stat-title">{{ context.mvp_recolector.email }}</div>
                </div>
            </div>
        </div>
    </div>

    <div class="card bg-base-100 w-11/12 shadow-2xl mx-auto my-10">
        <div class="card-body">
            <div class="collapse collapse-arrow bg-indigo-100">
                <input type="checkbox" />
                <div class="collapse-title text-lg font-semibold">Buscar material</div>
                <div class="collapse-content">
                    <p>
                        Ingrese el nombre del material para ver sus estadísticas:
                    </p>
                    <form action="#" method="GET"> 
                        <div class="flex items-center space-x-8 my-4">
                            <select class="select select-primary w-full" name="material" required>
                                <option selected disabled>Seleccione un material</option>
                                {% for m in context.materiales %}
                                    <option value="{{ m.id }}">{{ m.nombre }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="card-actions justify-end">
                            <button type="submit" class="btn btn-secondary">MVP</button>
                            <button type="submit" class="btn btn-primary">Ingresar</button>
                        </div>
                    </form>
                    {% if messages %}
                        {% for message in messages %}
                        <div role="alert" class="alert alert-error mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <span>{{ message }}</span>
                        </div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
            <div class="stats shadow-lg mt-4">
                <div class="stat">
                  <div class="stat-figure text-secondary">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      class="inline-block h-8 w-8 stroke-current">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                  </div>
                  <div class="stat-title">Downloads</div>
                  <div class="stat-value">31K</div>
                  <div class="stat-desc">Jan 1st - Feb 1st</div>
                </div>
              
                <div class="stat">
                  <div class="stat-figure text-secondary">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      class="inline-block h-8 w-8 stroke-current">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path>
                    </svg>
                  </div>
                  <div class="stat-title">New Users</div>
                  <div class="stat-value">4,200</div>
                  <div class="stat-desc">↗︎ 400 (22%)</div>
                </div>
              
                <div class="stat">
                  <div class="stat-figure text-secondary">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      class="inline-block h-8 w-8 stroke-current">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
                    </svg>
                  </div>
                  <div class="stat-title">New Registers</div>
                  <div class="stat-value">1,200</div>
                  <div class="stat-desc">↘︎ 90 (14%)</div>
                </div>
            </div>
        </div>
    </div>

    <div class="card bg-base-100 w-11/12 shadow-2xl mx-auto my-10">
        <div class="card-body">
            <div class="stats stats-vertical lg:stats-horizontal shadow-lg mt-4">
                <div class="stat">
                  <div class="stat-title">Promedio de casos exitosos</div>
                  <div class="stat-value">31K</div>
                  <div class="stat-desc">Jan 1st - Feb 1st</div>
                </div>
              
                <div class="stat">
                  <div class="stat-title">Promedio de recolecciones sin diferencias</div>
                  <div class="stat-value">4,200</div>
                  <div class="stat-desc">↗︎ 400 (22%)</div>
                </div>
              
                <div class="stat">
                  <div class="stat-title">Promedio de entregas a tiempo</div>
                  <div class="stat-value">1,200</div>
                  <div class="stat-desc">↘︎ 90 (14%)</div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}